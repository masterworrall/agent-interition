# Squid proxy — restricts OpenClaw outbound traffic to:
#   - Anthropic API (LLM access)
#   - Remote Solid servers (Pod storage)
#
# All other domains are blocked. This prevents data exfiltration
# or unexpected network calls from the OpenClaw container.
#
# To use a different Solid server, add its domain below.

# Allowed destinations
acl allowed_domains dstdomain api.anthropic.com
acl allowed_domains dstdomain solidcommunity.net
acl allowed_domains dstdomain crawlout.io

# Allow CONNECT (HTTPS tunnelling) only to allowed domains on port 443
acl SSL_ports port 443
acl CONNECT method CONNECT

http_access allow CONNECT allowed_domains SSL_ports
http_access deny CONNECT

# Allow HTTP to allowed domains (unlikely but covers edge cases)
http_access allow allowed_domains

# Deny everything else
http_access deny all

# Listen on port 3128 (default Squid port)
http_port 3128

# Minimal logging
access_log none
cache_log /dev/null

# No caching — we're a firewall, not a cache
cache deny all
